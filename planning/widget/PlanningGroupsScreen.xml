<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://ofbiz.apache.org/Widget-Screen" 
        xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <!-- ========================================================= -->
    <!-- ===============  SEARCH PLANNING GROUPS  ================ -->
    <!-- ========================================================= -->
    <screen name="scrPlanningGroupsMain">
        <section>

            <actions>
                <!-- Cargar datos de referencia (igual que Machinery) -->
                <service service-name="getPlanningGroupsReferenceData"/>
                <property-map resource="PlanningUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>

            <widgets>
                <decorator-screen name="main-decorator"
                                  location="component://planning/widget/CommonScreens.xml">
                    <decorator-section name="body">

                        <container style="main-container">

                            <label text="${uiLabelMap.PlanningTitleMenuPlanningGroups}" style="h2"/>

                            <!-- Formulario de búsqueda -->
                            <include-form name="SearchPlanningGroupsForm"
                                          location="component://planning/widget/PlanningGroupsForms.xml"/>

                            <!-- Lista sin resultados aún -->
                            <include-form name="ListPlanningGroups"
                                          location="component://planning/widget/PlanningGroupsForms.xml"/>

                        </container>

                    </decorator-section>
                </decorator-screen>
            </widgets>

        </section>
    </screen>


    <!-- ======================================================== -->
    <!-- ===========  SEARCH PLANNING GROUPS RESULTS  =========== -->
    <!-- ======================================================== -->
    <screen name="scrSearchPlanningGroupsResults">
        <section>

            <actions>
                <!-- Ejecutar servicio principal -->
                <service service-name="searchPlanningGroups"/>
                <!-- Datos de referencia -->
                <service service-name="getPlanningGroupsReferenceData"/>
                <property-map resource="PlanningUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>

            <widgets>
                <decorator-screen name="main-decorator"
                                  location="component://planning/widget/CommonScreens.xml">
                    <decorator-section name="body">

                        <container style="main-container">

                            <label text="${uiLabelMap.PlanningTitleMenuPlanningGroups}" style="h2"/>

                            <!-- Repetimos formulario para permitir nueva búsqueda -->
                            <include-form name="SearchPlanningGroupsForm"
                                          location="component://planning/widget/PlanningGroupsForms.xml"/>

                            <!-- Ahora sí mostramos la lista con planningGroupList -->
                            <include-form name="ListPlanningGroups"
                                          location="component://planning/widget/PlanningGroupsForms.xml"/>

                        </container>

                    </decorator-section>
                </decorator-screen>
            </widgets>

        </section>
    </screen>

</screens>
